{"version":3,"file":"Toast.stories-0046255b.js","sources":["../../../../packages/toast/src/lib/toast.tsx","../../../../packages/toast/src/lib/ToastProvider.tsx"],"sourcesContent":["/* eslint-disable-next-line */\nimport Alert, { AlertProps } from \"@bootwind/alert\"\nimport { cn } from \"@bootwind/common\"\nexport interface ToastProps extends AlertProps {\n  id?: string\n  className?: string,\n}\nexport function Toast(props: ToastProps) {\n  return (\n    <div className={cn('toast', props.className)}>\n      <Alert {...props}></Alert>\n    </div>\n  );\n}\n\nexport default Toast;\n","import { ReactNode, createContext, useContext, useId, useReducer, useRef, useState } from \"react\";\nimport { Toast, ToastProps } from \"..\";\n\ninterface IToastProvider {\n    toasts: ToastProps[]\n    add: (props: ToastProps) => void \n    close: (toastId: string) => void \n}\ninterface ToastProviderInterface {\n    children?: any\n    // Duration in milliseconds\n    duration?: number\n    position?: \"top-left\" | \"top-right\" | \"bottom-left\" | \"bottom-right\"\n}\n\ninterface State {\n    toasts: ToastProps[]\n}\n\nconst positionClasses = {\n    \"top-left\": \"top-4 left-4\",\n    \"bottom-left\": \"bottom-4 left-4\",\n    \"top-right\": \"top-4 right-4\",\n    \"bottom-right\": \"bottom-4 right-4\",\n}\nconst ToastContext = createContext<IToastProvider>({} as IToastProvider)\n\ntype Action = \n    | {\n        type: \"push\"\n        toast: ToastProps\n      }\n    | {\n        type: \"remove\"\n        toastId?: string\n    }\n\nconst reducer = (state: State, action: Action): State => {\n    switch (action.type) {\n        case 'push':\n            return { toasts: [action.toast, ...state.toasts] }\n        case 'remove':\n            if(action.toastId === undefined) {\n                return {\n                    toasts: []\n                }\n            } \n            return {\n                toasts: state.toasts.filter(t => t.id !== action.toastId)\n            }\n    }\n}\nlet count = 0\nexport function ToastProvider({ children, position = \"bottom-right\", duration = 2000 }: ToastProviderInterface) {\n    function genId() {\n        count = (count + 1) % Number.MAX_SAFE_INTEGER\n        return count.toString()\n    }\n    const [state, dispatch] = useReducer(reducer, { toasts: [] })\n\n    const add = (newToast: ToastProps) => {\n        newToast.id = genId()\n        dispatch({\n            type: \"push\",\n            toast: newToast\n        })\n\n        setTimeout(() => {\n            close(newToast.id!)\n        }, duration)\n    }\n\n    const close = (toastId: string) => {\n        dispatch({\n            toastId: toastId,\n            type: \"remove\"\n        })\n    }\n    \n    return (\n        <ToastContext.Provider value={{add, close, toasts: state.toasts}}>\n            {children}\n            {/* Render the toasts */}\n            <div className={`toasts absolute flex gap-3 flex-col min-w-[300px] ${positionClasses[position]}`}>\n                {state.toasts.map(toast => (\n                    <Toast {...toast} key={toast.id}></Toast>\n                ))}\n            </div>\n        </ToastContext.Provider>\n    )\n}\nexport const useToastContext = () => useContext(ToastContext)"],"names":["Toast","props","jsx","cn","Alert","positionClasses","ToastContext","createContext","reducer","state","action","t","count","ToastProvider","children","position","duration","genId","dispatch","useReducer","add","newToast","close","toastId","jsxs","toast","createElement","useToastContext","useContext"],"mappings":"gUAOO,SAAAA,EAAAC,EAAA,CACL,OAAAC,EAAA,MAAA,CAAA,UAAAC,EAAA,QAAAF,EAAA,SAAA,EAAA,SAAAC,EAAAE,EAAA,CAAA,GAAAH,CAAA,CAAA,CAAA,CAAA,CAKF,qqCCMA,MAAAI,EAAA,CAAwB,WAAA,eACR,cAAA,kBACG,YAAA,gBACF,eAAA,kBAEjB,EACAC,EAAAC,EAAAA,cAAA,CAAA,CAAA,EAYAC,EAAA,CAAAC,EAAAC,IAAA,CACI,OAAAA,EAAA,KAAA,CAAqB,IAAA,OAEb,MAAA,CAAA,OAAA,CAAAA,EAAA,MAAA,GAAAD,EAAA,MAAA,GAAiD,IAAA,SAEjD,OAAAC,EAAA,UAAA,OACI,CAAO,OAAA,CAAA,CACM,EAGjB,CAAO,OAAAD,EAAA,OAAA,OAAAE,GAAAA,EAAA,KAAAD,EAAA,OAAA,CACqD,CAC5D,CAEZ,EACA,IAAAE,EAAA,EACO,SAAAC,EAAA,CAAA,SAAAC,EAAA,SAAAC,EAAA,eAAA,SAAAC,EAAA,KAAA,CACH,SAAAC,GAAA,CACI,OAAAL,GAAAA,EAAA,GAAA,OAAA,iBACAA,EAAA,UAAsB,CAE1B,KAAA,CAAAH,EAAAS,CAAA,EAAAC,EAAAA,WAAAX,EAAA,CAAA,OAAA,CAAA,CAAA,CAAA,EAEAY,EAAAC,GAAA,CACIA,EAAA,GAAAJ,IACAC,EAAA,CAAS,KAAA,OACC,MAAAG,CACC,CAAA,EAGX,WAAA,IAAA,CACIC,EAAAD,EAAA,EAAA,CAAkB,EAAAL,CAAA,CACX,EAGfM,EAAAC,GAAA,CACIL,EAAA,CAAS,QAAAK,EACL,KAAA,QACM,CAAA,CACT,EAGL,OAAAC,EAAAlB,EAAA,SAAA,CAAA,MAAA,CAAA,IAAAc,EAAA,MAAAE,EAAA,OAAAb,EAAA,MAAA,EAAA,SAAA,CAESK,EAAAZ,EAAA,MAAA,CAAA,UAAA,qDAAAG,EAAAU,CAAA,CAAA,GAAA,SAAAN,EAAA,OAAA,IAAAgB,GAAAC,gBAAA1B,EAAA,CAAA,GAAAyB,EAAA,IAAAA,EAAA,EAAA,CAAA,CAAA,CAAA,CAAA,CAMD,CAAA,CAAA,CAGZ,CACO,MAAAE,EAAA,IAAAC,aAAAtB,CAAA;;;;;;;;;;;"}